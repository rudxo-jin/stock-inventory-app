# 재고조사 앱 PRD (Product Requirements Document)

## 📋 프로젝트 개요

### 목적
- 매장 재고 실사와 재고조정을 통한 정확한 재고 현황 파악
- 수기 입력과 전산 처리를 결합한 효율적인 재고관리 시스템

### 범위
- PART 엑셀 파일 기반 재고 현황 분석
- 실재고 입력 및 차이 계산
- 재고조정 데이터 반영
- 종합 결과보고서 생성

## 🎯 핵심 요구사항

### 1. 기준 데이터 처리
- **입력**: PART*.xlsx 파일 (14,671행, 27컬럼)
- **사용 컬럼**: 제작사품번, 부품명, 재고, 재고액
- **단가 계산**: 재고액 ÷ 재고

### 2. 실재고 조사
- **출력**: 실재고 입력용 엑셀 템플릿 다운로드
- **컬럼 구성**: 제작사품번, 부품명, 재고, 재고액, 실재고, 실재고액, 차액, 차이
- **입력 방식**: 실재고 또는 차이 중 하나 입력
- **우선순위**: 차이값 우선 (둘 다 입력시)

### 3. 자동 계산 로직
```
케이스 1: 실재고 입력시
- 실재고액 = 실재고 × 단가
- 차이 = 실재고 - 재고
- 차액 = 실재고액 - 재고액

케이스 2: 차이 입력시  
- 실재고 = 재고 + 차이
- 실재고액 = 실재고 × 단가
- 차액 = 실재고액 - 재고액
```

### 4. 재고조정 처리
- **입력**: 재고조정*.xls 파일
- **컬럼**: 일자, 수량변경(+/-), 제작사품번, 부품명, 수량
- **기간 설정**: 사용자가 시작일~종료일 선택
- **매칭**: 제작사품번으로 PART 파일과 연결
- **계산**: 수량변경(+) = 재고액 증가, 수량변경(-) = 재고액 감소

### 5. 결과보고서
**매장 재고 조사 보고** 양식:
- 점포명, 재고조사일시, 조사상식, 조사인원
- 전산재고액, (+)실재고액, (-)실재고액, 최종재고금액, 차액
- (+)재고조정액, (-)재고조정액, 차액  
- (+)총재고차액, (-)총재고차액, 총재고차액 계

## 🛠️ 기술스택

### Core
- **Framework**: Python + Streamlit
- **데이터 처리**: pandas, openpyxl
- **UI**: Streamlit 컴포넌트
- **시각화**: plotly (선택사항)

### 이유
- ✅ 빠른 개발 (몇 시간 내 완성)
- ✅ 사용자 친화적 웹 인터페이스
- ✅ 100% 무료 기술스택
- ✅ 높은 확장성
- ✅ 간단한 유지보수

## 📅 개발 단계 및 체크리스트

### Phase 1: 기본 구조 설정 ⏱️ 1시간
- [ ] 프로젝트 환경 설정
- [ ] requirements.txt 생성
- [ ] Streamlit 기본 앱 구조 생성
- [ ] 파일 업로드 컴포넌트 구현

### Phase 2: PART 파일 처리 ⏱️ 2시간
- [ ] PART 엑셀 파일 읽기 기능
- [ ] 필요 컬럼 추출 (제작사품번, 부품명, 재고, 재고액)
- [ ] 단가 계산 (재고액 ÷ 재고)
- [ ] 데이터 검증 및 오류 처리
- [ ] 처리 결과 미리보기

### Phase 3: 실재고 템플릿 생성 ⏱️ 1시간
- [ ] 실재고 입력용 엑셀 템플릿 생성
- [ ] 컬럼 추가: 실재고, 실재고액, 차액, 차이
- [ ] 엑셀 다운로드 기능
- [ ] 템플릿 양식 검증

### Phase 4: 실재고 데이터 처리 ⏱️ 2시간
- [ ] 작성된 실재고 엑셀 파일 업로드
- [ ] 실재고/차이 입력값 검증
- [ ] 자동 계산 로직 구현
  - [ ] 실재고 → 실재고액, 차이, 차액 계산
  - [ ] 차이 → 실재고, 실재고액, 차액 계산
- [ ] 차이값 우선 처리 로직
- [ ] 미입력 품목 기존값 유지

### Phase 5: 재고조정 처리 ⏱️ 2시간
- [ ] 재고조정 엑셀 파일 읽기
- [ ] 날짜 기간 선택 UI
- [ ] 제작사품번 매칭 로직
- [ ] 수량변경(+/-) 처리
- [ ] 재고조정액 계산
- [ ] 최종 재고 현황 업데이트

### Phase 6: 결과보고서 생성 ⏱️ 2시간
- [ ] 보고서 양식 구현
- [ ] 각 섹션별 계산
  - [ ] 전산재고액, 실재고액 계산
  - [ ] 재고조정액 계산  
  - [ ] 총재고차액 계산
- [ ] 보고서 미리보기
- [ ] 엑셀 형태로 결과보고서 다운로드

### Phase 7: UI/UX 개선 ⏱️ 1시간
- [ ] 단계별 진행 상태 표시
- [ ] 오류 메시지 개선
- [ ] 로딩 상태 표시
- [ ] 반응형 레이아웃 적용

### Phase 8: 테스트 및 검증 ⏱️ 1시간
- [ ] 샘플 데이터로 전체 프로세스 테스트
- [ ] 계산 로직 검증
- [ ] 엣지 케이스 처리 확인
- [ ] 사용자 시나리오 테스트

## 🎯 성공 기준

### 기능적 요구사항
- ✅ PART 파일에서 필요 컬럼 정확 추출
- ✅ 실재고 입력 템플릿 정상 생성/다운로드
- ✅ 실재고/차이 자동 계산 정확성
- ✅ 재고조정 데이터 정확 반영
- ✅ 결과보고서 양식 일치

### 비기능적 요구사항
- ✅ 14,000+ 행 데이터 5초 내 처리
- ✅ 직관적인 사용자 인터페이스
- ✅ 오류 상황 명확한 안내
- ✅ 모바일 브라우저 지원

## 🚀 향후 확장 계획

### 단기 (1-2개월)
- 재고 현황 대시보드
- 품목별 재고 이력 관리
- 사용자별 권한 관리

### 중기 (3-6개월)
- 자동 재고 알림 시스템
- 재고 분석 리포트
- 모바일 앱 개발

### 장기 (6개월+)
- ERP 시스템 연동
- 바코드/QR코드 스캔
- 클라우드 멀티 매장 지원

## 📁 파일 구조
```
stock_app/
├── app.py                 # 메인 Streamlit 앱
├── requirements.txt       # 의존성 패키지
├── utils/
│   ├── data_processor.py  # 데이터 처리 로직
│   ├── calculator.py      # 계산 로직
│   └── report_generator.py# 보고서 생성
├── templates/             # 엑셀 템플릿
├── uploads/               # 업로드된 파일
└── outputs/               # 생성된 결과 파일
```

---
**작성일**: 2025-01-27  
**버전**: 1.0  
**상태**: 개발 준비 완료 